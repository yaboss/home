function per_page(i,t,e){""!=e&&(t=!1),$.ajax({type:"GET",url:"/case_studies",data:{show_products:i,sort_by:t,"pf-search":e},dataType:"script",success:"data",beforeSend:function(){}}).done(function(){})}function sort(i){$.ajax({type:"GET",url:"/case_studies",data:{sort_by:i},dataType:"script",success:"data",beforeSend:function(){$("#overlay_list_profolio").show()}}).done(function(){$("#overlay_list_profolio").hide()})}$(function(){var i=$("#ib-main-wrapper"),t=function(){var t=!1,e=-1,n=!1,o=i.find("div.ib-main > a"),a=o.not(".ib-content"),s=a.length,c=function(){a.addClass("ib-image"),r(),d()},r=function(){f(),i.kinetic({moved:function(){t=!0},stopped:function(){t=!1}})},f=function(){i.css("height",$(window).height())},d=function(){o.bind("click.ibTemplate",function(i){return t||h($(this)),!1}),$(window).bind("resize.ibTemplate",function(i){f(),$("#ib-img-preview, #ib-content-preview").css({width:$(window).width(),height:$(window).height()+100})})},h=function(i){return n?!1:void(i.hasClass("ib-content")?(n=!0,e=i.index(".ib-content"),p(i,function(){n=!1})):(n=!0,e=i.index(".ib-image"),l(i,function(){n=!1})))},l=function(t,e){var n=t.children("img").data("largesrc"),o=t.children("span").text(),a={src:n,description:o};t.addClass("ib-loading"),u(n,function(){t.removeClass("ib-loading");var c=$("#ib-img-preview").length>0;c?$("#ib-img-preview").children("img.ib-preview-img").attr("src",n).end().find("span.ib-preview-descr").text(o):$("#previewTmpl").tmpl(a).insertAfter(i);var r=x(n);t.removeClass("ib-img-loading"),$("#ib-img-preview").css({width:t.width(),height:t.height(),left:t.offset().left,top:t.offset().top}).children("img.ib-preview-img").hide().css({width:r.width,height:r.height,left:r.left,top:r.top}).fadeIn(400).end().show().animate({width:$(window).width(),left:0},500,"easeOutExpo",function(){$(this).animate({height:$(window).height(),top:0},400,function(){var i=$(this);i.find("span.ib-preview-descr, span.ib-close").show(),s>1&&i.find("div.ib-nav").show(),e&&e.call()})}),c||w()})},p=function(t,e){var n=$("#ib-content-preview").length>0,o=t.children("div.ib-teaser").html(),a=t.children("div.ib-content-full").html(),s={teaser:o,content:a};n||$("#contentTmpl").tmpl(s).insertAfter(i),$("#ib-content-preview").css({width:t.width(),height:t.height(),left:t.offset().left,top:t.offset().top}).show().animate({width:$(window).width(),left:0},500,"easeOutExpo",function(){$(this).animate({height:$(window).height(),top:0},400,function(){var i=$(this),t=i.find("div.ib-teaser"),s=i.find("div.ib-content-full"),c=i.find("span.ib-close");n&&(t.html(o),s.html(a)),t.show(),s.show(),c.show(),$(".carousel").length>0&&$(".carousel").carousel(),e&&e.call()})}),n||b()},u=function(i,t){$("<img/>").load(function(){t&&t.call()}).attr("src",i)},w=function(){var i=$("#ib-img-preview");i.find("span.ib-nav-prev").bind("click.ibTemplate",function(i){g("prev")}).end().find("span.ib-nav-next").bind("click.ibTemplate",function(i){g("next")}).end().find("span.ib-close").bind("click.ibTemplate",function(i){v()}),$(window).bind("resize.ibTemplate",function(t){var e=i.children("img.ib-preview-img"),n=x(e.attr("src"));e.css({width:n.width,height:n.height,left:n.left,top:n.top})})},b=function(){$("#ib-content-preview").find("span.ib-close").bind("click.ibTemplate",function(i){m()})},g=function(t){if(n)return!1;n=!0;var o=$("#ib-img-preview"),c=o.find("div.ib-loading-large");c.show(),"next"===t?e===s-1?e=0:++e:"prev"===t&&(0===e?e=s-1:--e);var r=a.eq(e),f=r.children("img").data("largesrc"),d=r.children("span").text();u(f,function(){c.hide();var t=x(f);o.children("img.ib-preview-img").attr("src",f).css({width:t.width,height:t.height,left:t.left,top:t.top}).end().find("span.ib-preview-descr").text(d),i.scrollTop(r.offset().top).scrollLeft(r.offset().left),n=!1})},v=function(){if(n)return!1;n=!0;var i=a.eq(e);$("#ib-img-preview").find("span.ib-preview-descr, div.ib-nav, span.ib-close").hide().end().animate({height:i.height(),top:i.offset().top},500,"easeOutExpo",function(){$(this).animate({width:i.width(),left:i.offset().left},400,function(){$(this).fadeOut(function(){n=!1})})})},m=function(){if(n)return!1;n=!0;var i=o.not(".ib-image").eq(e);$("#ib-content-preview").find("div.ib-teaser, div.ib-content-full, span.ib-close").hide().end().animate({height:i.height(),top:i.offset().top},500,"easeOutExpo",function(){$(this).animate({width:i.width(),left:i.offset().left},400,function(){$(this).fadeOut(function(){n=!1})})})},x=function(i){var t=new Image;t.src=i;var e,n,o=$(window).width(),a=$(window).height(),s=a/o,c=t.width,r=t.height,f=r/c;return s>f?(n=a,e=a/f):(n=o*f,e=o),{width:e,height:n,left:(o-e)/2,top:(a-n)/2}};return{init:c}}();t.init()}),$("#ib-main-wrapper").mousewheel(function(i,t){$(this).stop(!1,!0).animate({scrollLeft:"-="+60*t},{duration:100,queue:!1,easing:"swing"}),i.preventDefault()}),function(i){function t(i){i.eq(0).animate({opacity:.6},500,function(){t(i.slice(1))})}function e(i){for(var t,e,n=i.length;n;)t=Math.random()*n|0,e=i[--n],i[n]=i[t],i[t]=e;return i}var n=i("#ib-main-wrapper a").css({opacity:0});e(n),t(n)}(jQuery),$(".ib-main").mousemove(function(i){var t=-1*i.pageX/50,e=-1*i.pageY/50;$(this).css("background-position",t+"px "+e+"px"),console.log(t)}),$(document).ready(function(){$(".ib-main").mousemove(function(i){-(i.pageX+this.offsetLeft)/20,-(i.pageY+this.offsetTop)/20})});