/*
 * jQuery WCircleMenu
 * By: Wahyu Danarto
 * Version 0.1
 * Last Modified: 09/13/2014
 * 
 * Copyright 2014 Wahyu Danarto
 * You may use this project under MIT or GPL licenses.
 * 
 */
!function(e){function t(t){if("undefined"==typeof t.objek)return!1;var a=t.objek instanceof jQuery?t.objek:e(t.objek);if(a.is(".animatingTranslateXYO"))return!1;var r="undefined"==typeof t.targetX?!1:t.targetX,i="undefined"==typeof t.fromX?!1:t.fromX,o="undefined"==typeof t.targetY?!1:t.targetY,u="undefined"==typeof t.fromY?!1:t.fromY,c="undefined"==typeof t.targetO?!1:t.targetO,s="undefined"==typeof t.fromO?!1:t.fromO,f="undefined"==typeof t.targetRot?!1:t.targetRot,l="undefined"==typeof t.fromRot?!1:t.fromRot,d="undefined"==typeof t.callback?!1:t.callback,h="function"!=typeof t.easingFunc?R:t.easingFunc,p="undefined"==typeof t.step?15:t.step,g="transform";["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";"undefined"!=typeof document.body.style[t]&&(g=t)}),a.addClass("animatingTranslateXYO"),n(a,r,i,o,u,c,s,f,l,p,0,d,h,g)}function n(e,t,o,u,c,s,f,l,d,h,p,g,M,m){if(e.is(".animatingTranslateXYO")){("undefined"==typeof o||o===!1)&&(o=parseInt(a(e[0]))),("undefined"==typeof t||t===!1)&&(t=o),("undefined"==typeof c||c===!1)&&(c=parseInt(r(e[0]))),("undefined"==typeof u||u===!1)&&(u=c),("undefined"==typeof f||f===!1)&&(f=parseFloat(i(e[0]))),("undefined"==typeof s||s===!1)&&(s=f),("undefined"==typeof d||d===!1)&&(d=0),("undefined"==typeof l||l===!1)&&(l=d);var w={};if(h>=p){var v=M(p,o,t-o,h),y=M(p,c,u-c,h),O=M(p,f,s-f,h),C=M(p,d,l-d,h);w[m]="translate3d("+v+"px, "+y+"px, 0)rotate("+C+"deg)",w.opacity=O,p+=1,window.requestAnimationFrame(function(){n(e,t,o,u,c,s,f,l,d,h,p,g,M,m)}),e.css(w)}else w[m]="translate3d("+t+"px, "+u+"px, 0)rotate("+l+"deg)",w.opacity=s,e.css(w),e.removeClass("animatingTranslateXYO"),"function"==typeof g&&g()}}function a(e){var t=new WebKitCSSMatrix(window.getComputedStyle(e,null).webkitTransform);return t.m41}function r(e){var t=new WebKitCSSMatrix(window.getComputedStyle(e,null).webkitTransform);return t.m42}function i(e){return window.getComputedStyle(e).opacity}function o(e){switch(e){case"linearEase":return u;case"easeInQuad":return c;case"easeOutQuad":return s;case"easeInOutQuad":return f;case"easeInCubic":return l;case"easeOutCubic":return d;case"easeInOutCubic":return h;case"easeInQuart":return p;case"easeOutQuart":return g;case"easeInOutQuart":return M;case"easeInQuint":return m;case"easeOutQuint":return w;case"easeInOutQuint":return v;case"easeInSine":return y;case"easeOutSine":return O;case"easeInOutSine":return C;case"easeInExpo":return I;case"easeOutExpo":return b;case"easeInOutExpo":return k;case"easeInCirc":return F;case"easeOutCirc":return R;case"easeInOutCirc":return X;case"easeInElastic":return Y;case"easeOutElastic":return S;case"easeInOutElastic":return x;case"easeInBack":return P;case"easeOutBack":return B;case"easeInOutBack":return Q;case"easeInBounce":return W;case"easeOutBounce":return j;case"easeInOutBounce":return _}}function u(e,t,n,a){return n*e/a+t}function c(e,t,n,a){return n*(e/=a)*e+t}function s(e,t,n,a){return-n*(e/=a)*(e-2)+t}function f(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function l(e,t,n,a){return n*Math.pow(e/a,3)+t}function d(e,t,n,a){return n*(Math.pow(e/a-1,3)+1)+t}function h(e,t,n,a){return(e/=a/2)<1?n/2*Math.pow(e,3)+t:n/2*(Math.pow(e-2,3)+2)+t}function p(e,t,n,a){return n*Math.pow(e/a,4)+t}function g(e,t,n,a){return-n*(Math.pow(e/a-1,4)-1)+t}function M(e,t,n,a){return(e/=a/2)<1?n/2*Math.pow(e,4)+t:-n/2*(Math.pow(e-2,4)-2)+t}function m(e,t,n,a){return n*Math.pow(e/a,5)+t}function w(e,t,n,a){return n*(Math.pow(e/a-1,5)+1)+t}function v(e,t,n,a){return(e/=a/2)<1?n/2*Math.pow(e,5)+t:n/2*(Math.pow(e-2,5)+2)+t}function y(e,t,n,a){return n*(1-Math.cos(e/a*(Math.PI/2)))+t}function O(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t}function C(e,t,n,a){return n/2*(1-Math.cos(Math.PI*e/a))+t}function I(e,t,n,a){return n*Math.pow(2,10*(e/a-1))+t}function b(e,t,n,a){return n*(-Math.pow(2,-10*e/a)+1)+t}function k(e,t,n,a){return(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t}function F(e,t,n,a){return n*(1-Math.sqrt(1-(e/=a)*e))+t}function R(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t}function X(e,t,n,a){return(e/=a/2)<1?n/2*(1-Math.sqrt(1-e*e))+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t}function Y(e,t,n,a){var r=1.70158,i=0,o=n;return 0==n?t:0==e?t:1==(e/=a)?t+n:(i||(i=.3*a),o<Math.abs(n)?(o=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i))+t)}function S(e,t,n,a){var r=1.70158,i=0,o=n;return 0==n?t:0==e?t:1==(e/=a)?t+n:(i||(i=.3*a),o<Math.abs(n)?(o=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin((e*a-r)*(2*Math.PI)/i)+n+t)}function x(e,t,n,a){var r=1.70158,i=0,o=n;return 0==n?t:0==e?t:2==(e/=a/2)?t+n:(i||(i=a*(.3*1.5)),o<Math.abs(n)?(o=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/o),1>e?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i))+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)*.5+n+t)}function P(e,t,n,a,r){var i="undefined"==typeof r?1.70158:r;return n*(e/=a)*e*((i+1)*e-i)+t}function B(e,t,n,a,r){var i="undefined"==typeof r?1.70158:r;return n*((e=e/a-1)*e*((i+1)*e+i)+1)+t}function Q(e,t,n,a,r){var i="undefined"==typeof r?1.70158:r;return(e/=a/2)<1?n/2*(n*n*(((i*=1.525)+1)*e))+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t}function W(e,t,n,a){return n-easing.easeOutBounce(a-e,0,n,a)+t}function j(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}function _(e,t,n,a){return a/2>e?.5*easing.easeOutBounce(2*e,0,n,a)+t:.5*easing.easeOutBounce(2*e-a,0,n,a)+.5*n+t}e.fn.WCircleMenu=function(n){function a(e){if(!e.is(".wcircle-open")){var n=e.children("div.wcircle-menu");n.show();var a=n.children("div");t({objek:n.prev(),targetX:0,fromX:0,targetY:0,fromY:0,targetO:1,fromO:1,targetRot:i.iconRotation,fromRot:0,easingFunc:i.easingFuncShow,step:i.step});for(var r=0;r<a.length;r++)!function(n){var r=!1;n==a.length-1&&(r=function(){e.removeClass("wcircle-animating"),e.addClass("wcircle-open"),"function"==typeof i.openCallback&&i.openCallback()}),setTimeout(function(){t({objek:a.eq(n),targetX:Math.round(Math.cos(i.angle_interval*n+i.angle_start)*i.distance),fromX:0,targetY:Math.round(Math.sin(i.angle_interval*n+i.angle_start)*i.distance),fromY:0,targetO:1,fromO:0,targetRot:0,fromRot:i.itemRotation,easingFunc:i.easingFuncShow,step:i.step,callback:r})},i.delay*n)}(r)}}function r(e){if(e.is(".wcircle-open")){var n=e.children("div.wcircle-menu"),a=n.children("div");t({objek:n.prev(),targetX:0,fromX:0,targetY:0,fromY:0,targetO:1,fromO:1,targetRot:0,fromRot:i.iconRotation,easingFunc:i.easingFuncHide,step:i.step});for(var r=a.length-1;r>=0;r--)!function(r){var o=!1;0==r&&(o=function(){n.hide(),e.removeClass("wcircle-animating"),e.removeClass("wcircle-open"),"function"==typeof i.closeCallback&&i.closeCallback()}),setTimeout(function(){t({objek:a.eq(r),targetX:0,fromX:Math.round(Math.cos(i.angle_interval*r+i.angle_start)*i.distance),targetY:0,fromY:Math.round(Math.sin(i.angle_interval*r+i.angle_start)*i.distance),targetO:0,fromO:1,targetRot:i.itemRotation,fromRot:0,easingFunc:i.easingFuncHide,step:i.step,callback:o})},i.delay*(a.length-(r+1)))}(r)}}if("open"==n)return void this.trigger("WCircleMenuOpen");if("close"==n)return void this.trigger("WCircleMenuClose");var i=e.extend({},e.fn.WCircleMenu.defaults,n);return i.easingFuncShow=o(i.easingFuncShow),i.easingFuncHide=o(i.easingFuncHide),this.children("div.wcircle-icon").css({position:"absolute",top:0,height:0,width:i.width,height:i.height,display:"block"}),this.children("div.wcircle-menu").css({width:i.width,height:i.height,position:"relative",display:"none"}).children("div").css({position:"absolute",top:"0",left:"0",opacity:"0"}),this.off("WCircleMenuOpen").on("WCircleMenuOpen",function(){self=e(this),a(self)}),this.off("WCircleMenuClose").on("WCircleMenuClose",function(){self=e(this),r(self)}),this.off("click").on("click",function(t){var n=e(this);if(!n.is(".wcircle-animating")){n.addClass("wcircle-animating");var i=n.children("div.wcircle-menu");i.is(":visible")?r(n):a(n)}})},e.fn.WCircleMenu.defaults={width:"50px",height:"50px",angle_start:-Math.PI/2,delay:50,distance:100,angle_interval:Math.PI/6,easingFuncShow:"easeOutBack",easingFuncHide:"easeInBack",step:15,openCallback:!1,closeCallback:!1,itemRotation:360,iconRotation:180}}(jQuery);